<!DOCTYPE html>
<html>
<head>
<script>

function setCookie(cname,cvalue,exdays) {
// function setCookie(cname,cvalue,exdays) {
  var d = new Date();
//   exdays = 1000
  d.setTime(d.getTime() + (exdays*24*60*60*1000));
  var expires = "expires=" + d.toGMTString();
  document.cookie = cname + "=" + cvalue + "; Secure" ;
//   document.cookie = cname + "=" + cvalue + ";expires=" + expires + ";path=/";
}

function getCookie(cname) {
  var name = cname + "=";
  var decodedCookie = decodeURIComponent(document.cookie);
  var ca = decodedCookie.split(';');
  for(var i = 0; i < ca.length; i++) {
    var c = ca[i];
    while (c.charAt(0) == ' ') {
      c = c.substring(1);
    }
    if (c.indexOf(name) == 0) {
      return c.substring(name.length, c.length);
    }
  }
  return "";
}

function timeDiff(dateLog) {
    var timeArray = dateLog.split('<br/>');
    console.log(timeArray);
    var t1 = new Date(timeArray[0]);
    var t2 = new Date(timeArray[1]);
    console.log(t2);
    var timeDiff = t1 - t2;
    if (isFinite(timeDiff)) {
    // if (timeDiff.length > 2) {
        // document.getElementById("p1").innerHTML = timeDiff + " seconds";
        var text = new Date(timeDiff).toISOString().slice(11, -1).split(".")[0];
        timeParts = text.split(":");      
        document.getElementById("p1").innerHTML = text + '<br/>'
        + 'H:' + timeParts[0]
        + ' M:' + timeParts[1]
        + ' S:' + timeParts[2].split(".")[0];

    } else {
        // console.log(t1, t2, timeDiff);
        document.getElementById("p1").innerHTML = "";
    };
}

function checkCookie() {
    var d = new Date();
    d.setTime(d.getTime());
    var thisUse = d.toUTCString().replace(" GMT", "");
    // var thisUse = "lastUsed=" + d.toGMTString();
    var dateLog = getCookie("dateLog");
    setCookie("dateLog", thisUse + '<br/>' + dateLog, 0);
    var dateLog = getCookie("dateLog");
    document.getElementById("p2").innerHTML = dateLog;

    timeDiff(dateLog);
    }

function removeCookie() {
    setCookie('dateLog', ' ', -10);    
    document.getElementById("p1").innerHTML = "";
    document.getElementById("p2").innerHTML = "";
    // document.cookie = "dateLog=; expires=Thu, 01 Jan 2020 00:00:00 UTC; path=/"
}

function removePrevious() {
    // setCookie('dateLog',"",-10);
    var dateLog = getCookie("dateLog");
    // split text into an array
    var lines = dateLog.split('<br/>');
    // remove one line, starting at the first position
    lines.splice(0,1);
    // join the array back into a single string
    var revisedLog = lines.join('<br/>');
    setCookie("dateLog", revisedLog, 0);  
    document.getElementById("p2").innerHTML = revisedLog;
    // document.cookie = "dateLog=; expires=Thu, 01 Jan 2020 00:00:00 UTC; path=/"
}

</script>

<style>
    img {
      width: 60%;
      height: auto;
    }

    button {
        background-color: Transparent;
        background-repeat:no-repeat;
        /* border: none; */
        cursor:pointer;
        overflow: hidden;
        outline:none;
    }

    p {
        /* font-family: Helvetica; */
        font-family: 'Calibri';
        /* font-family: Optima; */
        /* font-family: Lucida Bright; */
    }
    </style>
    
</head>

<body onload="checkCookie()">
    <img src="https://digitalbarcode.net/QR/CSUONFKW5MAR.png" width="20" height="20"> 
    <!-- <img src="https://www.mozilla.org/media/protocol/img/logos/firefox/browser/og.4ad05d4125a5.png" width="20" height="20">  -->
    <p id="p1">Hello</p>
    <p id="p2">Hello</p>
    <button type="button" background-color=Transparent onclick="removeCookie()">Reset DateLog</button>
    <button type="button" background-color=Transparent onclick="removePrevious()">Remove Previous</button>
 
</body>
</html>
